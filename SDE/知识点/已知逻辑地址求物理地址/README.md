# 已知逻辑地址求物理地址

### 知识储备

> 内存地址中的最后一个H是什么意思，比如0x70C0H?

不加 H 或者 0x 都表示为十进制

实际的十六进制 0x 或者 H 都可以表示一个十六进制数;

不过 ~~0x70C0H~~ 是一种错误的表示，实际程序当中 **汇编以后缀 H 表示十六进制；C语言以前缀 0x 表示十六进制**

直接写成：70C0H 或 0x70C0 是一样的

### 类型一：已知逻辑地址（[页号,位移量/页内地址]）求物理地址

*例题1*

若在一分页存储管理系统中,某作业的页表如下所示。已知页面大小为1024字节,试将逻辑地址[0,100],[1,179],[2,785]和[3,1010],页内地址单位字节,转化为相应的物理地址。

页号|块号
:-:|:-:
0|3
1|5
2|6
3|2

需要注意的数据：页面大小1024字节、逻辑地址[页号，页内地址]

公式：  `物理地址=（页面大小*块号）+ 位移量【位移量就是页内地址】`

套公式，根据表格，用已知页号找对应的块号

答案：

(1)对于逻辑地址[0,100],查页表第0页在第3块,所以物理地址为:   1024*3＋100＝3172

(2)对于逻辑地址[1,179],查页表第1页在第5块,所以物理地址为： 1024*5＋179＝5299

(3)对于逻辑地址[2,785],查页表第2页在第6块,所以物理地址为： 1024*6＋785＝6929

(4)对于逻辑地址[3,1010],查页表第3页在第2块,所以物理地址为: 1024*2＋1010＝3058

***
*例题2*

（南开大学1994年试题）在采用页式存储管理的系统中，默作业J的逻辑地址空间为4页（每页2048字节），且已知该作业的页面映象表（即页表）如下：

页号|块号
:-:|:-:
0|2
1|4
2|6
3|8

试借助地址变换图（即要求画出地址变换图）求出有效逻辑地址4865所对应的物理地址。

解：在本题中，一页大小为2048字节，则逻辑地址4865的页号机页内位移为：

页号：4865/2048=2

页内位移：4865-2048x2=769

然后，通过页表查知物理块号为6，将物理块号与逻辑地址中的页内位移拼接，形成物理地址，即：

`6*2048+769=13057`

### 类型二： 已知逻辑地址（十六进制、二进制等非十进制）求物理地址
*例题3*

某虚拟存储器的用户空间共32个页面，每页1KB，主存16KB。

试问：

(1)逻辑地址的有效位是______位；

(2)物理地址需要______位；

(3)假定某时刻系统为用户的第0,1,2,3页分别分配的物理块号为5,10,4,7，试将逻辑地址0A5CH和093CH变换为物理地址。

页号|物理块号
:-:|:-:
0|5
1|10
2|4
3|7

需要注意的数据：

页面数32个、页面大小1KB、主存大小16KB

提取出来的信息：

【页面数32个→2^5】：逻辑地址页号数为5位         

【页面大小1KB→2^10】：页内地址数为 10位          

【主存大小16KB→2^4】

物理地址求取步骤：

（1）十六进制转二进制

例：`0A5CH` 为 `0000 1010 0101 1100`

（2）找页号和页内地址

从右往左数，右10位为页内地址，再往左的5位数为页号

`0000 10|10 0101 1100`

（3）页号变块号，页内地址不变

0010转十进制为2，即页号为2，对照表格可得物理块号为4，转二进制位为0100；页内地址（紫色部分）不变：

`0001 00|10 0101 1100`

二进制转十六进制：125CH（此例中只有前两位数会变动）

答案：

(1) 逻辑地址的有效位是 15 位；(2^5×2^10  共15位)

(2) 物理地址需要 14 位； (2^4×2^10  共14位)

(3) 
```
0000 1010 0101 1100             0000 1001 0011 1100
0001 0010 0101 1100             0001 0010 0101 1100
125CH                           113CH
```
***
*例题4*

在一分页存储管理系统中,逻辑地址长度为16位,页面大小为4096字节,现有
一逻辑地址为2F6AH,且第0, 1, 2页依次存放在物理块5, 10 ,11中,问相应的物理地址为多少?

解:由题目所给给条件可知,页面大小为4096字节推算出页内地址数为 12位(2^12=4096)，本页式系统的逻辑地址结构为:

页号P,页内位移W

逻辑地址2F6AH的二进制表示如下:
```
P                           W
0010              111101101010
```

由此可知逻辑地址2F6AH的页号为2,该页存放在第11号物理块中,用十六进制表示志号为B,所以物理地址为BF6AH.

### 参考
[操作系统-第四章存储器管理 计算题：已知逻辑地址求物理地址](https://blog.csdn.net/weixin_43767668/article/details/112798201)

[有效逻辑地址所对应的物理地址的计算方法](https://blog.csdn.net/leves1989/article/details/3305420)
